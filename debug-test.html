<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>MDViewer Debug Test</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .error { color: red; }
        .success { color: green; }
        #console { 
            border: 1px solid #ccc;
            padding: 10px;
            background: #f5f5f5;
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>MDViewer 语法测试</h1>
    <div id="status">加载中...</div>
    <div id="console"></div>
    
    <script>
        const consoleDiv = document.getElementById('console');
        const originalConsole = {
            log: console.log,
            error: console.error,
            warn: console.warn
        };
        
        function logToPage(type, ...args) {
            const msg = args.map(a => typeof a === 'object' ? JSON.stringify(a, null, 2) : String(a)).join(' ');
            consoleDiv.innerHTML += `<div class="${type}">[${type.toUpperCase()}] ${msg}</div>`;
            originalConsole[type](...args);
        }
        
        console.log = (...args) => logToPage('log', ...args);
        console.error = (...args) => logToPage('error', ...args);
        console.warn = (...args) => logToPage('warn', ...args);
        
        window.onerror = function(msg, url, line, col, error) {
            document.getElementById('status').innerHTML = `<span class="error">❌ JavaScript 错误</span>`;
            console.error(`错误: ${msg}`);
            console.error(`位置: ${url}:${line}:${col}`);
            if (error && error.stack) {
                console.error(`堆栈: ${error.stack}`);
            }
            return false;
        };
        
        console.log('页面加载完成，准备加载 standalone-app.js');
    </script>
    
    <script src="public/js/standalone-app.js"></script>
    
    <script src="test-class.js"></script>
</body>
</html>
